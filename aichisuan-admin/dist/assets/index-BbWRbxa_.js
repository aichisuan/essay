import{d as R,ad as X,l as Pe,a9 as we,z as H,b as u,_ as d,ae as Fe,C as x,aa as V,P as O,af as A,I as Be,t as T,y as le,x as Ne,ag as Oe,ah as Se,ai as Ae,aj as Ie,ak as $e,al as Z,am as Me,an as Re,ao as je,q as U,ap as Ee,aq as De,v as ee,g as Le,ar as ze}from"./index-BNbA7v75.js";import{u as He,D as Ve}from"./index-DhYPhdFh.js";import{i as ae,c as We,d as qe,B as _,e as se,o as Qe,f as Ue}from"./_plugin-vue_export-helper-B53X9KRV.js";var _e=function(e,l){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&l.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,n=Object.getOwnPropertySymbols(e);f<n.length;f++)l.indexOf(n[f])<0&&Object.prototype.propertyIsEnumerable.call(e,n[f])&&(a[n[f]]=e[n[f]]);return a};let K;const Ke=e=>{K={x:e.pageX,y:e.pageY},setTimeout(()=>K=null,100)};We()&&qe(document.documentElement,"click",Ke,!0);const Xe=()=>({prefixCls:String,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:O.any,closable:{type:Boolean,default:void 0},closeIcon:O.any,onOk:Function,onCancel:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:O.any,okText:O.any,okType:String,cancelText:O.any,icon:O.any,maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:A(),cancelButtonProps:A(),destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:A(),maskStyle:A(),mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function,mousePosition:A()}),b=R({compatConfig:{MODE:3},name:"AModal",inheritAttrs:!1,props:ae(Xe(),{width:520,confirmLoading:!1,okType:"primary"}),setup(e,l){let{emit:a,slots:n,attrs:f}=l;const[s]=X("Modal"),{prefixCls:v,rootPrefixCls:p,direction:y,getPopupContainer:i}=Pe("modal",e),[c,o]=He(v);we(e.visible===void 0);const r=g=>{a("update:visible",!1),a("update:open",!1),a("cancel",g),a("change",!1)},t=g=>{a("ok",g)},m=()=>{var g,k;const{okText:I=(g=n.okText)===null||g===void 0?void 0:g.call(n),okType:P,cancelText:C=(k=n.cancelText)===null||k===void 0?void 0:k.call(n),confirmLoading:h}=e;return u(Be,null,[u(_,x({onClick:r},e.cancelButtonProps),{default:()=>[C||s.value.cancelText]}),u(_,x(x({},se(P)),{},{loading:h,onClick:t},e.okButtonProps),{default:()=>[I||s.value.okText]})])};return()=>{var g,k;const{prefixCls:I,visible:P,open:C,wrapClassName:h,centered:w,getContainer:B,closeIcon:N=(g=n.closeIcon)===null||g===void 0?void 0:g.call(n),focusTriggerAfterClose:E=!0}=e,D=_e(e,["prefixCls","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),W=H(h,{[`${v.value}-centered`]:!!w,[`${v.value}-wrap-rtl`]:y.value==="rtl"});return c(u(Ve,x(x(x({},D),f),{},{rootClassName:o.value,class:H(o.value,f.class),getContainer:B||(i==null?void 0:i.value),prefixCls:v.value,wrapClassName:W,visible:C??P,onClose:r,focusTriggerAfterClose:E,transitionName:V(p.value,"zoom",e.transitionName),maskTransitionName:V(p.value,"fade",e.maskTransitionName),mousePosition:(k=D.mousePosition)!==null&&k!==void 0?k:K}),d(d({},n),{footer:n.footer||m,closeIcon:()=>u("span",{class:`${v.value}-close-x`},[N||u(Fe,{class:`${v.value}-close-icon`},null)])})))}}}),Ye=()=>{const e=T(!1);return le(()=>{e.value=!0}),e},Ge={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:A(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function ne(e){return!!(e&&e.then)}const oe=R({compatConfig:{MODE:3},name:"ActionButton",props:Ge,setup(e,l){let{slots:a}=l;const n=T(!1),f=T(),s=T(!1);let v;const p=Ye();Ne(()=>{e.autofocus&&(v=setTimeout(()=>{var o,r;return(r=(o=Oe(f.value))===null||o===void 0?void 0:o.focus)===null||r===void 0?void 0:r.call(o)}))}),le(()=>{clearTimeout(v)});const y=function(){for(var o,r=arguments.length,t=new Array(r),m=0;m<r;m++)t[m]=arguments[m];(o=e.close)===null||o===void 0||o.call(e,...t)},i=o=>{ne(o)&&(s.value=!0,o.then(function(){p.value||(s.value=!1),y(...arguments),n.value=!1},r=>(p.value||(s.value=!1),n.value=!1,Promise.reject(r))))},c=o=>{const{actionFn:r}=e;if(n.value)return;if(n.value=!0,!r){y();return}let t;if(e.emitEvent){if(t=r(o),e.quitOnNullishReturnValue&&!ne(t)){n.value=!1,y(o);return}}else if(r.length)t=r(e.close),n.value=!1;else if(t=r(),!t){y();return}i(t)};return()=>{const{type:o,prefixCls:r,buttonProps:t}=e;return u(_,x(x(x({},se(o)),{},{onClick:c,loading:s.value,prefixCls:r},t),{},{ref:f}),a)}}});function S(e){return typeof e=="function"?e():e}const re=R({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","confirmPrefixCls","footer"],setup(e,l){let{attrs:a}=l;const[n]=X("Modal");return()=>{const{icon:f,onCancel:s,onOk:v,close:p,okText:y,closable:i=!1,zIndex:c,afterClose:o,keyboard:r,centered:t,getContainer:m,maskStyle:g,okButtonProps:k,cancelButtonProps:I,okCancel:P,width:C=416,mask:h=!0,maskClosable:w=!1,type:B,open:N,title:E,content:D,direction:W,closeIcon:ve,modalRender:Ce,focusTriggerAfterClose:pe,rootPrefixCls:L,bodyStyle:ge,wrapClassName:ye,footer:Y}=e;let $=f;if(!f&&f!==null)switch(B){case"info":$=u($e,null,null);break;case"success":$=u(Ie,null,null);break;case"error":$=u(Ae,null,null);break;default:$=u(Se,null,null)}const xe=e.okType||"primary",q=e.prefixCls||"ant-modal",M=`${q}-confirm`,ke=a.style||{},G=P??B==="confirm",J=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",z=`${q}-confirm`,be=H(z,`${z}-${e.type}`,{[`${z}-rtl`]:W==="rtl"},a.class),Q=n.value,Te=G&&u(oe,{actionFn:s,close:p,autofocus:J==="cancel",buttonProps:I,prefixCls:`${L}-btn`},{default:()=>[S(e.cancelText)||Q.cancelText]});return u(b,{prefixCls:q,class:be,wrapClassName:H({[`${z}-centered`]:!!t},ye),onCancel:he=>p==null?void 0:p({triggerCancel:!0},he),open:N,title:"",footer:"",transitionName:V(L,"zoom",e.transitionName),maskTransitionName:V(L,"fade",e.maskTransitionName),mask:h,maskClosable:w,maskStyle:g,style:ke,bodyStyle:ge,width:C,zIndex:c,afterClose:o,keyboard:r,centered:t,getContainer:m,closable:i,closeIcon:ve,modalRender:Ce,focusTriggerAfterClose:pe},{default:()=>[u("div",{class:`${M}-body-wrapper`},[u("div",{class:`${M}-body`},[S($),E===void 0?null:u("span",{class:`${M}-title`},[S(E)]),u("div",{class:`${M}-content`},[S(D)])]),Y!==void 0?S(Y):u("div",{class:`${M}-btns`},[Te,u(oe,{type:xe,actionFn:v,close:p,autofocus:J==="ok",buttonProps:k,prefixCls:`${L}-btn`},{default:()=>[S(y)||(G?Q.okText:Q.justOkText)]})])])]})}}}),F=[],j=e=>{const l=document.createDocumentFragment();let a=d(d({},Qe(e,["parentContext","appContext"])),{close:s,open:!0}),n=null;function f(){n&&(Z(null,l),n=null);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];const r=c.some(t=>t&&t.triggerCancel);e.onCancel&&r&&e.onCancel(()=>{},...c.slice(1));for(let t=0;t<F.length;t++)if(F[t]===s){F.splice(t,1);break}}function s(){for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];a=d(d({},a),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),f.apply(this,c)}}),a.visible&&delete a.visible,v(a)}function v(i){typeof i=="function"?a=i(a):a=d(d({},a),i),n&&Ue(n,a,l)}const p=i=>{const c=Re,o=c.prefixCls,r=i.prefixCls||`${o}-modal`,t=c.iconPrefixCls,m=je();return u(Me,x(x({},c),{},{prefixCls:o}),{default:()=>[u(re,x(x({},i),{},{rootPrefixCls:o,prefixCls:r,iconPrefixCls:t,locale:m,cancelText:i.cancelText||m.cancelText}),null)]})};function y(i){const c=u(p,d({},i));return c.appContext=e.parentContext||e.appContext||c.appContext,Z(c,l),c}return n=y(a),F.push(s),{destroy:s,update:v}};function ie(e){return d(d({},e),{type:"warning"})}function ce(e){return d(d({},e),{type:"info"})}function ue(e){return d(d({},e),{type:"success"})}function fe(e){return d(d({},e),{type:"error"})}function de(e){return d(d({},e),{type:"confirm"})}const Je=()=>({config:Object,afterClose:Function,destroyAction:Function,open:Boolean}),Ze=R({name:"HookModal",inheritAttrs:!1,props:ae(Je(),{config:{width:520,okType:"primary"}}),setup(e,l){let{expose:a}=l;var n;const f=U(()=>e.open),s=U(()=>e.config),{direction:v,getPrefixCls:p}=Ee(),y=p("modal"),i=p(),c=()=>{var m,g;e==null||e.afterClose(),(g=(m=s.value).afterClose)===null||g===void 0||g.call(m)},o=function(){e.destroyAction(...arguments)};a({destroy:o});const r=(n=s.value.okCancel)!==null&&n!==void 0?n:s.value.type==="confirm",[t]=X("Modal",De.Modal);return()=>u(re,x(x({prefixCls:y,rootPrefixCls:i},s.value),{},{close:o,open:f.value,afterClose:c,okText:s.value.okText||(r?t==null?void 0:t.value.okText:t==null?void 0:t.value.justOkText),direction:s.value.direction||v.value,cancelText:s.value.cancelText||(t==null?void 0:t.value.cancelText)}),null)}});let te=0;const en=R({name:"ElementsHolder",inheritAttrs:!1,setup(e,l){let{expose:a}=l;const n=T([]);return a({addModal:s=>(n.value.push(s),n.value=n.value.slice(),()=>{n.value=n.value.filter(v=>v!==s)})}),()=>n.value.map(s=>s())}});function nn(){const e=T(null),l=T([]);ee(l,()=>{l.value.length&&([...l.value].forEach(v=>{v()}),l.value=[])},{immediate:!0});const a=s=>function(p){var y;te+=1;const i=T(!0),c=T(null),o=T(Le(p)),r=T({});ee(()=>p,C=>{k(d(d({},ze(C)?C.value:C),r.value))});const t=function(){i.value=!1;for(var C=arguments.length,h=new Array(C),w=0;w<C;w++)h[w]=arguments[w];const B=h.some(N=>N&&N.triggerCancel);o.value.onCancel&&B&&o.value.onCancel(()=>{},...h.slice(1))};let m;const g=()=>u(Ze,{key:`modal-${te}`,config:s(o.value),ref:c,open:i.value,destroyAction:t,afterClose:()=>{m==null||m()}},null);m=(y=e.value)===null||y===void 0?void 0:y.addModal(g),m&&F.push(m);const k=C=>{o.value=d(d({},o.value),C)};return{destroy:()=>{c.value?t():l.value=[...l.value,t]},update:C=>{r.value=C,c.value?k(C):l.value=[...l.value,()=>k(C)]}}},n=U(()=>({info:a(ce),success:a(ue),error:a(fe),warning:a(ie),confirm:a(de)})),f=Symbol("modalHolderKey");return[n.value,()=>u(en,{key:f,ref:e},null)]}function me(e){return j(ie(e))}b.useModal=nn;b.info=function(l){return j(ce(l))};b.success=function(l){return j(ue(l))};b.error=function(l){return j(fe(l))};b.warning=me;b.warn=me;b.confirm=function(l){return j(de(l))};b.destroyAll=function(){for(;F.length;){const l=F.pop();l&&l()}};b.install=function(e){return e.component(b.name,b),e};export{b as M};
