import{s as B}from"./Api-Bt383o_O.js";import{d as h,N as S,O as C,o as _,E as L,u as M,a as U,w as d,c as y,H as x,I as v,Q as w,K as I,r as b,x as N,b as i,n as T,h as $}from"./index-BNbA7v75.js";import{_ as F,a as q}from"./index-Z85uWWIw.js";import{_ as z,B as D}from"./_plugin-vue_export-helper-B53X9KRV.js";import{F as O,_ as R}from"./index-C5UnvUIB.js";import{I as V}from"./index-soqLs6PB.js";import"./css-Cn-XZvMJ.js";import"./pickAttrs-9kOryGu2.js";import"./index-CBDdN7ul.js";import"./shallowequal-ChwhcXDM.js";import"./index-C3g34NSf.js";const A=h({__name:"Pagination",props:S({total:{type:Number,required:!0}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:S(["changePageEmit"],["update:page","update:pageSize"]),setup(m,{emit:t}){const a=t,c=C(m,"page"),o=C(m,"pageSize"),u=(k,s)=>{a("changePageEmit",k,s)};return(k,s)=>{const n=F;return _(),L(n,{class:"pagination-wrap",current:c.value,"onUpdate:current":s[0]||(s[0]=e=>c.value=e),"page-size":o.value,"onUpdate:pageSize":s[1]||(s[1]=e=>o.value=e),total:m.total,onChange:u,onShowSizeChange:u,"show-total":e=>`总共: ${e} 条`},null,8,["current","page-size","total","show-total"])}}}),H=z(A,[["__scopeId","data-v-472aaa0e"]]),K=["onClick"],j=["onClick"],Q="calc(100vh - 320px)",G=h({__name:"Table",props:{likeList:{type:Array,required:!0}},emits:["update"],setup(m){const t=M(),a=U([{title:"user_id",dataIndex:"user_id",key:"user_id",width:100},{title:"用户id(已加密)",dataIndex:"user_idp",key:"user_idp",width:300},{title:"喜欢文章 id list",dataIndex:"like_article_ids",key:"like_article_ids",width:300},{title:"喜欢评论id list",dataIndex:"like_comment_ids",key:"like_comment_ids",width:300},{title:"操作",dataIndex:"action",key:"action"}]),c=u=>{t.push({path:"/layout/article-list",query:{id:u}})},o=u=>{t.push({path:"/layout/comments-list",query:{id:u}})};return(u,k)=>{const s=q;return _(),L(s,{rowKey:"comment_id","data-source":m.likeList,pagination:!1,columns:a.value,scroll:{scrollToFirstRowOnChange:!0,y:Q}},{bodyCell:d(({column:n,text:e})=>[n.key==="like_article_ids"?(_(!0),y(v,{key:0},x(e,(l,r)=>(_(),y("a",{class:"mg-10",key:`${n.key}-${r}`,onClick:g=>c(l)},I(l),9,K))),128)):w("",!0),n.key==="like_comment_ids"?(_(!0),y(v,{key:1},x(e,(l,r)=>(_(),y("a",{class:"mg-10",key:`${n.key}-${r}`,onClick:g=>o(l)},I(l),9,j))),128)):w("",!0)]),_:1},8,["data-source","columns","scroll"])}}}),J=z(G,[["__scopeId","data-v-65f950e9"]]),W=h({__name:"index",setup(m){const t=b({user_id:"",user_idp:""}),a=b({page:1,pageSize:10,total:0}),c=U([]);N(async()=>{await o(t)});const o=async n=>{n=n||t;const{user_id:e,user_idp:l}=n,r={user_id:e,user_idp:l},{code:g,data:f,pageInfo:{pageSize:p=1,page:P=1,total:E=0}}=await B.getUserLikeList({...r,...a});g===200&&(c.value=f,a.page=P,a.pageSize=p,a.total=E)},u=()=>{o({...t})},k=()=>{o({...t})},s=()=>{t.user_id="",t.user_idp="",a.page=1,a.pageSize=10,o({...t})};return T("updateTable",o),(n,e)=>{const l=V,r=R,g=D,f=O;return _(),y(v,null,[i(f,{layout:"inline",model:t,class:"comment_form"},{default:d(()=>[i(r,null,{default:d(()=>[i(l,{value:t.user_id,"onUpdate:value":e[0]||(e[0]=p=>t.user_id=p),placeholder:"喜欢id(搜索)"},null,8,["value"])]),_:1}),i(r,null,{default:d(()=>[i(l,{value:t.user_idp,"onUpdate:value":e[1]||(e[1]=p=>t.user_idp=p),placeholder:"用户id(搜索)"},null,8,["value"])]),_:1}),i(r,null,{default:d(()=>[i(g,{type:"primary","html-type":"submit",onClick:k},{default:d(()=>[$(" 查询 ")]),_:1})]),_:1}),i(r,null,{default:d(()=>[i(g,{type:"primary","html-type":"submit",onClick:s},{default:d(()=>[$(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"]),i(J,{likeList:c.value,onUpdate:e[2]||(e[2]=p=>o(t))},null,8,["likeList"]),i(H,{onChangePageEmit:u,page:a.page,"onUpdate:page":e[3]||(e[3]=p=>a.page=p),"page-size":a.pageSize,"onUpdate:pageSize":e[4]||(e[4]=p=>a.pageSize=p),total:a.total},null,8,["page","page-size","total"])],64)}}}),re=z(W,[["__scopeId","data-v-0d0a2eac"]]);export{re as default};
